<!DOCTYPE html>
<html>
    <head>
        <title>Kullashi Blogs</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body> 
        <a href="Me.jpg" target="_blank">
            <img id="my-image" id="be" src="Me.jpg" alt="Ron Kullashi" class="centered-image">
        </a>
        <h1 class="underline" id="be">Kullashi Blogs</h1>
       
        <p class="intro">This is my blog. There will be a new blog every monday<br>-Ron Kullashi</p>
</head>
<style>
        body {
            background-color: #FDFBF3;
            font-family: system-ui, -apple-system, sans-serif;
            margin: 20px;
        }

        .top-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .new-blog-btn {
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: black;
            color: white;
            font-style: italic;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 10px 0;
            background: #f4f4f4;
            padding: 10px;
            border-radius: 5px;
        }

        .blog-title {
            text-decoration: none;
            color: black;
            font-size: 18px;
            font-style: italic;
            flex-grow: 1;
            margin-right: 15px;
        }

        /* Timer Display */
        .timer-container {
            font-size: 18px;
            font-style: italic;
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <h1>My Blog</h1>

    <div class="top-container">
        <button class="new-blog-btn" onclick="goToEditor()">New Blog</button>
        <div class="timer-container">
            Time since last blog: <span id="timer">Loading...</span>
        </div>
    </div>

    <ul id="blogList"></ul>

    <script>
        function goToEditor() {
            window.location.href = "blog-editor.html"; // Redirect to the blog editor
        }

        async function fetchBlogs() {
            try {
                let response = await fetch("https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/blogs.json");
                let blogs = await response.json();
                displayBlogs(blogs);
            } catch (error) {
                console.error("Error fetching blogs:", error);
            }
        }

        function displayBlogs(blogs) {
            let blogList = document.getElementById("blogList");
            blogList.innerHTML = "";

            blogs.forEach(blog => {
                let li = document.createElement("li");

                let a = document.createElement("a");
                a.href = `blog.html?id=${blog.id}`;
                a.textContent = blog.title;
                a.classList.add("blog-title");

                li.appendChild(a);
                blogList.appendChild(li);
            });
        }

        function updateTimer() {
            let blogs = JSON.parse(localStorage.getItem("blogs")) || [];
            if (blogs.length === 0) {
                document.getElementById("timer").textContent = "No blogs yet.";
                return;
            }

            let latestBlog = blogs.sort((a, b) => b.date - a.date)[0]; // Get most recent blog
            let lastBlogTime = latestBlog.date;
            let timerElement = document.getElementById("timer");

            function updateTime() {
                let now = new Date().getTime();
                let elapsed = now - lastBlogTime;

                let seconds = Math.floor((elapsed / 1000) % 60);
                let minutes = Math.floor((elapsed / (1000 * 60)) % 60);
                let hours = Math.floor((elapsed / (1000 * 60 * 60)) % 24);
                let days = Math.floor(elapsed / (1000 * 60 * 60 * 24));

                timerElement.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            }

            updateTime();
            setInterval(updateTime, 1000); // Update every second
        }

        document.addEventListener("DOMContentLoaded", fetchBlogs);
    </script>

</body>

</html> 
